<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Earn Coins</title>

  <!-- Telegram -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Monetag -->
  <script src="//libtl.com/sdk.js"
          data-zone="10318378"
          data-sdk="show_10318378"></script>
</head>

<body>
  <h2>üí∞ Watch Ad & Earn</h2>
  <button id="adBtn">Watch Ad</button>
  <p id="msg"></p>

<script type="module">
  import { initializeApp } from
  "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAyHbj89lXQjftn81XFTRnhrCQenmusu8k",
    authDomain: "moneteg-ads-afb9f.firebaseapp.com",
    projectId: "moneteg-ads-afb9f",
    storageBucket: "moneteg-ads-afb9f.firebasestorage.app",
    messagingSenderId: "622725908968",
    appId: "1:622725908968:web:f7c317c2bd1cdd73da7c5d"
  };

  initializeApp(firebaseConfig);
</script>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  const userId = tg.initDataUnsafe.user.id;
  const BACKEND = "https://monetagads-1.onrender.com"; // ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Render ‡¶≤‡¶ø‡¶Ç‡¶ï

  document.getElementById("adBtn").onclick = () => {
    document.getElementById("msg").innerText = "Ad running...";

    // Monetag Ad
    show_10318378();

    // ‚è±Ô∏è 15 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞‡ßá reward
    setTimeout(async () => {
      const r = await fetch(BACKEND + "/reward", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId })
      });

      const d = await r.json();
      document.getElementById("msg").innerText =
        d.status === "OK"
        ? "‚úÖ Coin Added"
        : "‚è≥ Wait 30 sec";
    }, 15000);
  };
</script>
</body>
</html>
